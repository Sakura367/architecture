### cookie
- cookie的实现是基于HTTP协议的；
- cookie是客户端保存用户信息的一种机制 ，本质是存储在浏览器的一小段文本数据，不超过4kb；

【第一次发送HTTP请求时】，服务器产生Cookie并返回给浏览器存储，
【以后浏览器每次发送HTTP请求时】，HTTP的请求报文的头部行中都会带着Cookie（首部行的格式为字段名和value值）

缺点： 安全性
- Cookie是放在【HTTP请求报文】的头部行中，是以明文形式在网络中传输，若没有加密，一旦被截获，可以直接获取隐私信息；
- 即使是Cookie被MD5加密，一旦Cookie被截获，把别人的Cookie向服务器提交，并且能够通过验证，就可以冒充受害人的身份登陆网站--------Cookie欺骗。

### session
- session机制一般借助Cookie来实现；
- session对象存储在服务器中，用于记录用户的状态，
- sessionID是无规律的字符串，存储在浏览器端的【Cookie中】；
当浏览器【发送HTTP请求时】会带着sessionID，服务器根据SessionID就能找出用户信息；
- session会配置一个过期时间（默认30min），过期后需要重新登录；

当客户端第一次访问服务器时，【服务器创建session出来后】，会把sessionID以cookie的形式回写给客户机，这样，只要客户机的浏览器不关，再去访问服务器时，都会带着session的id号，服务器发现客户机浏览器带sessionID过来了，就会使用中与之对应的session为之服务。

运行机制：
1. 主机的浏览器进程与服务器进程建立浏览器连接
2. 当用户浏览器进程【第一次向服务器进程发送HTTP请求报文时】，服务器进程就会为其产生一个唯一的sessionID，并以此为索引在服务器的后端数据库创建session对象，用来记录该用户访问该网站的各种信息
3. 接着服务器给浏览器进程发回HTTP响应报文，在响应报文中，包含一个首部字段为Set-Cookie的首部行，该字段由服务器写入了sessionID，以及会话结束时间
4. 当浏览器进程收到该响应报文后，就在一个特定的Cookie文件中添加一行，记录该服务器的域名和Cookie；
5. 【当用户再次使用浏览器访问这个网站时】，每发送一个HTTP请求报文，浏览器都会从Cookie文件中取出该网站的sessionID，并放到HTTP请求报文的Cookie 头部行 中，服务器根据sessionID就可以识别该用户，返回相关信息；

#### cookie与session区别
1. 储存：cookie储存在浏览器，是一种数据载体（一段文本），会随HTTP请求报文发出；session对象储存在服务器中，用于记录用户状态，而sessionID存于Cookie的value中
2. 安全性：session比cookie更加安全。seesionID是随机字符串而不是明文，避免了直接存用户名密码，提高安全性；有会话时间限制，且可以选择使用签名，而cookie容易造成cookie欺骗
3. 数据类型不同：cookie只支持字符串数据，session对象可以储存任意类型数据
4. 有效期不同：cookie存活时间可设置较长时间，而session存活时间相对较短，服务端关闭等都会丢失session
5. 存储大小不同：单个cookie的数据不能超过4KB，session储存的数据内容可以更大，但是session过多会占用更多服务器资源

### token
token是在客户端频繁向服务端请求数据，服务端频繁的去数据库查询用户名和密码并进行对比，判断用户名和密码正确与否，并作出相应提示，在这样的背景下，Token便应运而生

token的意思是“令牌”，是服务端生成的一串字符串，作为客户端进行请求的一个令牌，当用户第一次登录后，服务器生成一个Token便将此Token返回给客户端，以后客户端只需带上这个Token前来请求数据即可，无需再次带上用户名和密码,减轻服务器的压力。

运行机制：
1. 客户端使用用户名跟密码请求登录；
2. 服务端收到请求，去验证用户名与密码；
3. 验证成功后，服务端会签发一个 Token，再把这个 Token 发送给客户端；
4. 客户端收到 Token 以后可以把它存储起来，比如放在 Cookie 里或者 Local Storage 里；
5. 客户端每次向服务端请求资源的时候需要带着服务端签发的 Token；
6. 服务端收到请求，然后去验证客户端请求里面带着的 Token，如果验证成功，就向客户端返回请求的数据。

服务器并不保存token，而是通过数据签名的方法，对数据用算法（如SHA-256）与私钥进行签名后作为Token，当Token发送给服务器时，服务会通过相同的算法与密钥进行签名，如果和Token中的签名相同，服务器就知道用户已经登录过了，并且可以直接得到用户的userID。（服务器用cpu的计算时间来换取了储存空间）

#### session与token区别
token和session其实都是为了身份验证

服务端session存用户数据，客户端访问服务端的时候，根据sessionid找用户数据；而使用token时服务端只有一段加密代码；

同样，session和token都是有过期时间一说，都需要去管理过期时间；
其实token与session的问题是一种时间与空间的博弈问题，session是空间换时间，而token是时间换空间。两者的选择要看具体情况而定。

虽然确实都是“客户端记录，每次访问携带”，但使用token则后端不需要记录什么东西，每次解密验证即可；而 sessionid ，一般都是一段随机字符串，需要到后端去检索 id 的有效性
